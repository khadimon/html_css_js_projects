/* Scene scaling without text scaling */
.scene {
  transform: scale(var(--scale));
}

.scene * {
  font-size: clamp(12px, 1vw, 18px);
}

/* Body font styling */
body {
  font-family: 'Pacifico', 'Comic Sans MS', cursive;
  padding: 20px;
  margin: 0;
}

/* Flower color variables */
:root {
  --petal-main: #4A90E2;
  --petal-light: #B3D9FF;
  --petal-shadow: #3F6FB5;
}

/* Heading styles */
h1, h2 {
  letter-spacing: 0.03em;
  text-shadow: 0 2px 6px rgba(0,0,0,0.15);
}

/* Desktop (default) */
.container {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
}

/* Tablet */
@media (max-width: 1024px) {
  .container {
    grid-template-columns: repeat(2, 1fr);
  }
}

/* Phone */
@media (max-width: 600px) {
  .container {
    grid-template-columns: 1fr;
  }
}


/* Disney-style Birthday Title */
.birthday-title {
  display: flex;
  justify-content: center;
  align-items: center;
  height: 100%;
  width: 100%;
  padding: 30px 0 20px 0;
  margin-top: 20px;
}

.disney-text {
  font-family: 'Brush Script MT', 'Lucida Handwriting', cursive;
  font-size: 4.5rem;
  font-weight: 900;
  font-style: italic;
  color: #FFFB00;
  margin: 0;
  letter-spacing: 2px;
  transform: none;
  filter: drop-shadow(0px 6px 12px rgba(0,0,0,0.4));
}

.happy-birthday {
  font-family: 'Pacifico', cursive;
  color: #FFF1C1;
  font-size: 7rem;
  letter-spacing: 0.04em;
  line-height: 1.2;
  text-shadow:
    0 2px 6px rgba(0, 0, 0, 0.35),
    0 0 12px rgba(255, 215, 120, 0.35);
  position: absolute;
  top: 18%;
  left: 50%;
  transform: translateX(-50%);
  animation: fadeFloatIn 2s ease-out forwards;
}

@media (max-width: 768px) {
  body {
    padding: 12px;
  }

  .happy-birthday {
    font-size: 4.5rem;
    top: 16%;
    letter-spacing: 0.03em;
  }
}

@media (max-width: 480px) {
  body {
    padding: 8px;
  }

  .happy-birthday {
    font-size: 3.6rem;
    top: 18%;
  }
}

@keyframes fadeFloatIn {
  from {
    opacity: 0;
    transform: translate(-50%, 20px);
  }
  to {
    opacity: 1;
    transform: translate(-50%, 0);
  }
}

.letter {
  display: inline-block;
  text-shadow: 
    3px 3px 0px #2d5016,
    6px 6px 0px rgba(45, 80, 22, 0.5);
  animation: slideInLetter 0.6s cubic-bezier(0.68, -0.55, 0.265, 1.55) forwards;
  opacity: 0;
}

.letter:nth-child(1) { animation-delay: 0s; }
.letter:nth-child(2) { animation-delay: 0.1s; }
.letter:nth-child(3) { animation-delay: 0.2s; }
.letter:nth-child(4) { animation-delay: 0.3s; }
.letter:nth-child(5) { animation-delay: 0.4s; }
.letter:nth-child(6) { animation-delay: 0.5s; }
.letter:nth-child(7) { animation-delay: 0.6s; }
.letter:nth-child(8) { animation-delay: 0.7s; }
.letter:nth-child(9) { animation-delay: 0.8s; }
.letter:nth-child(10) { animation-delay: 0.9s; }
.letter:nth-child(11) { animation-delay: 1s; }
.letter:nth-child(12) { animation-delay: 1.1s; }
.letter:nth-child(13) { animation-delay: 1.2s; }
.letter:nth-child(14) { animation-delay: 1.3s; }
.letter:nth-child(15) { animation-delay: 1.4s; }
.letter:nth-child(16) { animation-delay: 1.5s; }
.letter:nth-child(17) { animation-delay: 1.6s; }
.letter:nth-child(18) { animation-delay: 1.7s; }
.letter:nth-child(19) { animation-delay: 1.8s; }
.letter:nth-child(20) { animation-delay: 1.9s; }
.letter:nth-child(21) { animation-delay: 2s; }
.letter:nth-child(22) { animation-delay: 2.1s; }
.letter:nth-child(23) { animation-delay: 2.2s; }

@keyframes slideInLetter {
  0% {
    opacity: 0;
    transform: translateY(-30px) scale(0.8);
  }
  50% {
    opacity: 1;
  }
  100% {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}

/* Hide flowers initially until 2s after page load */
.flowers {
  opacity: 0;
  animation: fadeInFlowers 0.8s ease-in forwards 2s;
}

@keyframes fadeInFlowers {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

/* Reserve space for text at top and bottom */
#text-top {
  position: absolute;
  top: 485px;
  left: 50%;
  transform: translateX(-50%);
  width: 100%;
  height: auto;
  z-index: 100;
  pointer-events: none;
}

#text-bottom {
  position: absolute;
  bottom: 0;
  left: 0;
  width: 100%;
  height: 10vh;
  z-index: 100;
  pointer-events: none;
}

.stage {
  position: absolute;
  inset: 0;
  transform-origin: center bottom;
  transition: transform 3s ease;
}

/* Camera zoom per scene */
#scene1 .stage { transform: scale(1); }
#scene2 .stage { transform: scale(0.85); }
#scene3 .stage { transform: scale(0.7); }
#scene4 .stage { transform: scale(0.55); }

.text {
  position: absolute;
  top: 10%;
  width: 100%;
  text-align: center;
  color: #ffdede;
  font-size: 1.5rem;
  z-index: 10;
}

.click {
  position: absolute;
  bottom: 5%;
  width: 100%;
  text-align: center;
  color: #ffb3b3;
  cursor: pointer;
}

.flower-set {
  position: absolute;
  bottom: 0;
  width: 100%;
  pointer-events: none;
}

.flower-set:nth-child(n+10) {
  opacity: 0.6;
  filter: blur(1px);
}

.flower-set:nth-child(n+15) {
  opacity: 0.4;
  filter: blur(2px);
}


/* ===== Flower garden ===== */
:root {
  --petal-main: #4A90E2;
  --petal-light: #B3D9FF;
  --petal-shadow: #3F6FB5;
  --h-margin: 3vw; /* horizontal safe margin */
  --stage-scale: 1;
}

.is-mobile {
  --h-margin: 3vw;
}

#garden {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  padding: 0 var(--h-margin) 0 var(--h-margin);
  box-sizing: border-box;
  pointer-events: none;
  z-index: 1;
  overflow: hidden;
}

/* Centered row (five projects side-by-side, equal spacing) */
.center-row {
  position: absolute;
  left: 50%;
  /* transform is conditionally set by JS (centered or offset by half a column) */
  display: grid;
  grid-auto-rows: auto;
  align-items: end;
  width: calc(100% - 2 * var(--h-margin));
  max-width: 1100px;
  pointer-events: none;
  grid-template-columns: repeat(var(--count, 5), 1fr);
  column-gap: var(--center-gap-px, 20px);
  row-gap: 12px;
  opacity: 1;
  transition: opacity 1.2s ease;
  animation: fadeInScale 1.2s ease-out;
}

.center-row.is-hidden {
  opacity: 0;
  pointer-events: none;
}

@keyframes fadeInScale {
  from {
    opacity: 0;
    transform: scale(0.95);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}

/* subtle visual separation for each project to make the grid more visible */
.center-row .flower-wrap {
  transition: transform 900ms cubic-bezier(0.34, 1.56, 0.64, 1),
              opacity 900ms ease-out;
  opacity: 1;
  justify-self: center;
  margin: 6px 10px;
}

.center-row .flower-wrap .flowers {
  filter: drop-shadow(0 -10px 16px rgba(0,0,0,0.4));
  border-radius: 6px;
  transition: filter 300ms ease;
}

.center-row .flower-wrap .flowers:hover {
  filter: drop-shadow(0 -12px 20px rgba(0,0,0,0.5));
}

/* helper when you want to nudge the whole row visually without touching JS */
.center-row.offset {
  /* no default value here; JS will compute the exact transform */
}

/* Scale wrapper for each flower project */
/* keep absolute wrappers for general garden but allow static layout inside rows */
.flower-wrap {
  position: absolute;
  bottom: 0;
  left: 50%;
  transform-origin: bottom center;
}

/* In center-row we use static flow instead of absolute positioning */
.center-row .flower-wrap {
  position: static;
  bottom: auto;
  left: auto;
  transform-origin: bottom center;
  margin: 0;
}

/* Hide secondary flowers when needed */
.hidden {
  display: none !important;
}

/* Text always on top */
.scene .text,
.scene .click,
.scene .final-text {
  position: relative;
  z-index: 10;
}

/* Unified scene wrapper for responsive scaling */
#stage {
  position: fixed;
  top: 50%;
  left: 50%;
  width: 1400px;
  height: 900px;
  max-width: 100vw;
  max-height: 100vh;
  transform: translate(-50%, -50%) scale(1);
  transform-origin: center center;
  pointer-events: none;
}
